{{ 'component-header.css' | asset_url | stylesheet_tag }}
<script src="{{ 'header.js' | asset_url }}" defer="defer"></script>

<header class="header header--top-center">
  <nav class="header__wrapper page-width">
    {%- comment -%} Logo {%- endcomment -%}
    <div class="header__heading">
      <h1 class="header__heading-link">
        <a href="{{ routes.root_url }}" class="header__heading-link-inner">
          {%- if section.settings.logo != blank -%}
            {%- assign logo_alt = section.settings.logo.alt | default: shop.name | escape -%}
            {%- assign logo_height = section.settings.logo_width | divided_by: section.settings.logo.aspect_ratio -%}
            {{ section.settings.logo | image_url: width: section.settings.logo_width | image_tag:
              class: 'header__heading-logo',
              widths: '50, 100, 150, 200, 250, 300, 400, 500',
              height: logo_height,
              width: section.settings.logo_width,
              alt: logo_alt
            }}
          {%- else -%}
            <span class="h2">{{ shop.name }}</span>
          {%- endif -%}
        </a>
      </h1>
    </div>

    {%- comment -%} Navigation {%- endcomment -%}
    <nav class="header__inline-menu">
      <ul class="list-menu list-menu--inline" role="list">
        {%- for link in section.settings.menu.links -%}
          <li>
            <a
              href="{{ link.url }}"
              class="header__menu-item list-menu__item link link--text focus-inset"
              {% if link.current %} aria-current="page"{% endif %}
            >
              {{ link.title | escape }}
            </a>
          </li>
        {%- endfor -%}
      </ul>
    </nav>

    {%- comment -%} Icons {%- endcomment -%}
    <div class="header__icons">
      <details-modal class="header__search">
        <details>
          <summary class="header__icon header__icon--search header__icon--summary link focus-inset modal__toggle" aria-haspopup="dialog" aria-label="{{ 'general.search.search' | t }}">
            <span>
              <svg class="icon icon-search" aria-hidden="true" focusable="false">
                <use href="#icon-search">
              </svg>
            </span>
          </summary>
          <div class="search-modal modal__content" role="dialog" aria-modal="true" aria-label="{{ 'general.search.search' | t }}">
            <div class="modal-overlay"></div>
            <div class="search-modal__content search-modal__content-bottom" tabindex="-1">
              {%- render 'search-form', search_placeholder: 'general.search.search' -%}
            </div>
            <button type="button" class="search-modal__close-button modal__close-button link link--text focus-inset" aria-label="{{ 'accessibility.close' | t }}">
              <svg class="icon icon-close" aria-hidden="true" focusable="false">
                <use href="#icon-close">
              </svg>
            </button>
          </div>
        </details>
      </details-modal>

      <a href="{{ routes.account_url }}" class="header__icon header__icon--account link focus-inset{% if section.settings.menu != blank %} small-hide{% endif %}">
        <svg class="icon icon-account" aria-hidden="true" focusable="false">
          <use href="#icon-account">
        </svg>
        <span class="visually-hidden">
          {%- liquid
            if customer
              echo 'customer.account_fallback' | t
            else
              echo 'customer.log_in' | t
            endif
          -%}
        </span>
      </a>

      <a href="{{ routes.cart_url }}" class="header__icon header__icon--cart link focus-inset" id="cart-icon-bubble">
        <svg class="icon icon-cart" aria-hidden="true" focusable="false">
          <use href="#icon-cart">
        </svg>
        <span class="visually-hidden">{{ 'templates.cart.cart' | t }}</span>
        {%- if cart != empty -%}
          <div class="cart-count-bubble">
            <span aria-hidden="true">{{ cart.item_count }}</span>
            <span class="visually-hidden">{{ 'sections.header.cart_count' | t: count: cart.item_count }}</span>
          </div>
        {%- endif -%}
      </a>

      <button class="header__icon header__icon--menu link focus-inset mobile-menu-toggle" aria-label="{{ 'sections.header.menu' | t }}">
        <svg class="icon icon-hamburger" aria-hidden="true" focusable="false">
          <use href="#icon-hamburger">
        </svg>
      </button>
    </div>
  </nav>

  {%- comment -%} Mobile Menu {%- endcomment -%}
  <div class="mobile-menu" id="mobile-menu">
    <div class="mobile-menu__wrapper">
      <button class="mobile-menu__close link focus-inset" aria-label="{{ 'accessibility.close' | t }}">
        <svg class="icon icon-close" aria-hidden="true" focusable="false">
          <use href="#icon-close">
        </svg>
      </button>
      <nav class="mobile-menu__nav">
        <ul class="mobile-menu__list" role="list">
          {%- for link in section.settings.menu.links -%}
            <li>
              <a
                href="{{ link.url }}"
                class="mobile-menu__link"
                {% if link.current %} aria-current="page"{% endif %}
              >
                {{ link.title | escape }}
              </a>
            </li>
          {%- endfor -%}
        </ul>
      </nav>
    </div>
  </div>
</header>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo image"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 300,
      "step": 10,
      "default": 100,
      "unit": "px",
      "label": "Logo width"
    },
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "Menu"
    }
  ]
}
{% endschema %}

